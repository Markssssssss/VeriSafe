# VeriSafe Ubuntu 部署 - 快速开始

欢迎！这是 VeriSafe 在 Ubuntu 服务器上的部署指南。根据你的经验选择合适的方式：

## 📚 三种部署方式

### 方式 1: 一键自动部署（推荐）⭐

如果你想要最简单的部署方式，使用自动化脚本：

```bash
# 1. 上传脚本到服务器（或直接克隆项目）
cd /var/www
git clone https://github.com/Markssssssss/VeriSafe.git verisafe
cd verisafe/VeriSafe-Final

# 2. 运行一键部署脚本
chmod +x deploy-ubuntu.sh
bash deploy-ubuntu.sh
```

脚本会自动完成：
- ✅ 安装 Node.js 20
- ✅ 安装 Nginx
- ✅ 配置防火墙
- ✅ 克隆/更新代码
- ✅ 安装依赖并构建
- ✅ 配置 Nginx
- ✅ 可选：配置 SSL 证书

**适用人群**: 想要快速部署，对 Linux 有一定了解

---

### 方式 2: 完整详细指南（新手推荐）📖

如果你完全没有服务器部署经验，或者想要理解每个步骤：

👉 **查看**: [UBUNTU_DEPLOYMENT_COMPLETE.md](./UBUNTU_DEPLOYMENT_COMPLETE.md)

这个指南包含：
- 📝 每个步骤的详细说明
- 💡 为什么需要这样做
- ⚠️  常见问题及解决方法
- 🔧 故障排查技巧
- 🔒 安全配置建议

**适用人群**: 第一次部署服务器，想要学习过程

---

### 方式 3: 精简版指南（有经验）⚡

如果你有服务器部署经验，需要快速参考：

👉 **查看**: [UBUNTU_DEPLOYMENT.md](./UBUNTU_DEPLOYMENT.md)

**适用人群**: 熟悉 Linux 和 Nginx 配置

---

## 🚀 快速开始（5分钟）

### 前提条件

1. ✅ Ubuntu 20.04+ 服务器
2. ✅ SSH 访问权限
3. ✅ sudo 权限
4. ✅ （可选）域名

### 步骤

```bash
# 1. 连接到服务器
ssh username@your-server-ip

# 2. 克隆项目（或上传文件）
cd /var/www
sudo git clone https://github.com/Markssssssss/VeriSafe.git verisafe
sudo chown -R $USER:$USER verisafe
cd verisafe/VeriSafe-Final

# 3. 运行部署脚本
chmod +x deploy-ubuntu.sh
bash deploy-ubuntu.sh

# 按照提示操作即可！
```

**完成！** 你的网站应该可以通过 `http://your-server-ip` 访问了。

---

## ❓ 常见问题

### Q: 我没有域名，可以使用 IP 地址吗？

A: 可以！在部署脚本中选择使用 IP 地址。但是，**MetaMask 连接需要 HTTPS**，建议使用 Let's Encrypt 的免费证书。

### Q: 部署后无法访问怎么办？

A: 检查以下几点：
1. 防火墙是否开放 80/443 端口
2. Nginx 是否运行: `sudo systemctl status nginx`
3. 查看错误日志: `sudo tail -f /var/log/nginx/error.log`

详细排查见 [完整指南](./UBUNTU_DEPLOYMENT_COMPLETE.md#常见问题排查)

### Q: MetaMask 无法连接？

A: MetaMask 要求 HTTPS。请配置 SSL 证书：
```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

### Q: 如何更新代码？

A: 使用部署脚本重新运行，或者：
```bash
cd /var/www/verisafe/VeriSafe-Final
git pull
cd frontend
npm install
npm run build
sudo systemctl reload nginx
```

---

## 📋 部署后检查清单

- [ ] 网站可以通过 HTTP 访问
- [ ] 前端页面正常显示
- [ ] SSL 证书已配置（如需 HTTPS）
- [ ] MetaMask 可以连接（需要 HTTPS）
- [ ] 可以执行年龄验证功能
- [ ] 防火墙已配置
- [ ] 备份计划已制定

---

## 🔗 相关文档

- [完整部署指南](./UBUNTU_DEPLOYMENT_COMPLETE.md) - 详细步骤说明
- [精简部署指南](./UBUNTU_DEPLOYMENT.md) - 快速参考
- [Vercel 部署指南](./DEPLOYMENT_GUIDE.md) - 云端部署（无需服务器）
- [主 README](./README.md) - 项目说明

---

## 💡 推荐学习路径

1. **第一次部署**: 
   - 使用 [完整指南](./UBUNTU_DEPLOYMENT_COMPLETE.md)
   - 理解每个步骤的含义

2. **第二次部署**:
   - 使用 [一键脚本](./deploy-ubuntu.sh)
   - 验证理解是否正确

3. **生产环境**:
   - 参考 [精简指南](./UBUNTU_DEPLOYMENT.md)
   - 根据需求自定义配置

---

## 🆘 需要帮助？

如果遇到问题：

1. 查看 [常见问题排查](./UBUNTU_DEPLOYMENT_COMPLETE.md#常见问题排查)
2. 检查日志文件
3. 在 GitHub Issues 提问

---

祝部署顺利！🎉

