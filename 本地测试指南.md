# 本地测试指南

## 快速启动

```bash
cd VeriSafe-Final/frontend
npm run dev
```

## 常见问题排查

### 1. 页面打不开 / 白屏
**解决：**
```bash
# 清理缓存
rm -rf node_modules/.vite .vite dist

# 重新安装依赖（如果需要）
npm install

# 重新启动
npm run dev
```

### 2. React 导入错误
**症状：** 控制台显示 "useState is not exported"
**解决：** 确保使用 React 18.3.1
```bash
npm list react react-dom
# 应该是 react@18.3.1 和 react-dom@18.3.1
```

### 3. 端口被占用
**症状：** "Port 5173 is already in use"
**解决：**
```bash
# 方法1: 杀掉占用端口的进程
lsof -ti:5173 | xargs kill -9

# 方法2: 修改 vite.config.ts 中的 port
```

### 4. MetaMask 连接问题
**检查：**
- 确保 MetaMask 已安装并解锁
- 确保切换到 Sepolia 测试网
- 浏览器控制台查看是否有错误

### 5. FHEVM 初始化失败
**症状：** "FHEVM is not initialized"
**解决：**
1. 确保钱包已连接
2. 确保在 Sepolia 网络
3. 刷新页面并重新连接钱包

## 测试步骤

1. **启动开发服务器**
   ```bash
   cd VeriSafe-Final/frontend
   npm run dev
   ```

2. **打开浏览器**
   - 自动打开：http://localhost:5173
   - 或手动访问该地址

3. **连接钱包**
   - 点击 "Connect Wallet"
   - 确保 MetaMask 切换到 Sepolia 网络
   - 确认连接请求

4. **测试验证**
   - 输入年龄（例如：20）
   - 点击 "Verify Age"
   - 在 MetaMask 中确认交易
   - 等待结果（Qualified/Not Qualified）

## 调试技巧

### 查看浏览器控制台
- 按 `F12` 或 `Cmd+Option+I` (Mac) / `Ctrl+Shift+I` (Windows)
- 查看 Console 标签页的错误信息

### 查看网络请求
- 在浏览器开发者工具中查看 Network 标签页
- 检查 API 调用和交易是否成功

### 检查 MetaMask
- 确保账户已连接
- 检查 Sepolia ETH 余额（需要测试币）
- 查看交易历史

## 获取 Sepolia ETH（测试币）

1. https://sepoliafaucet.com/
2. https://sepolia-faucet.pk910.de/
3. https://www.alchemy.com/faucets/ethereum-sepolia

## 联系支持

如果问题仍未解决，请提供：
1. 浏览器控制台的完整错误信息
2. 终端中的错误日志
3. 使用的 Node.js 版本：`node --version`
4. 使用的 npm 版本：`npm --version`

